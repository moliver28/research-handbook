{{- $teamDict := partials.IncludeCached "data/team-by-slug" page }}
{{- $teamSlice := slice }}
{{- range $k, $v := $teamDict }}
    {{- $teamSlice = append $v $teamSlice }}
{{- end }}
{{- $counterparts := slice }}

{{- $managerSlug := .Get 0 }}

{{- range .Params }}
    {{- $role := . }}
    {{ $members := where (where (where $teamSlice "role" "like" .) "reports_to" "ne" $managerSlug) "slug" "ne" $managerSlug }}
    {{ $counterparts = append $members $counterparts }}
{{- end }}

<table>
    <thead>
        <th>Name</th>
        <th>Role</th>
    </thead>
    <tbody>
        {{- range $counterparts }}
          <tr>
              <td>{{ partial "member-by-name" .name }}</td>
              <td>{{ .role | safe.HTML }}</td>
          </tr>
          {{- end }}
    </tbody>
</table>

<style>
    img.avatar {
    width: 30px;
    height: 30px;
    max-width: 30px;
    max-height: 30px;
    overflow: hidden;
    margin-right: 10px;
    border-radius: 50%;
    border: 1px solid lightgray;
    aspect-ratio: auto 90 / 90;
    overflow-clip-margin: content-box;
    }
</style>
