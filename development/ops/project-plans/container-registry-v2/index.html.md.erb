---
layout: handbook-page-toc
title: Container Registry Metadata Database Self-managed
description: >-
  Project plan for the rollout of Container Registry Metadata Database to self-managed users.
---

## On this page
{:.no_toc .hidden-md .hidden-lg}

- TOC
{:toc .hidden-md .hidden-lg}

## Weekly Project Plan

Epic: [https://gitlab.com/groups/gitlab-org/-/epics/5521](https://gitlab.com/groups/gitlab-org/-/epics/5521)

### Milestone 16.3 (June 18, 2023 - July 17, 2023)

#### Goals:
- Building instructions for manual install of the metadata database
- Planning discussions on how to breakdown the project into Experimental and Beta phases
- Milestone plan: [https://gitlab.com/gitlab-org/gitlab/-/issues/416110#container-registry](https://gitlab.com/gitlab-org/gitlab/-/issues/416110#container-registry)

#### Week of Aug 14-18
- Completed: 
    - Updated the [architecture blueprint](https://docs.gitlab.com/ee/architecture/blueprints/container_registry_metadata_database_self_managed_rollout/) with a new table structured for our feature based rollout approach: [https://gitlab.com/gitlab-org/gitlab/-/merge_requests/128824](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/128824)
    - Completed the POC for installing the database using Helm and Omnibus for new installations.  Demo videos are posted in the [issue](https://gitlab.com/gitlab-org/container-registry/-/issues/1065) for both installation paths.
    - Implemented Headway automation. All issues and MRs marked with the `~headway-self-managed-registry-db label` will be added to tables in the [epic](https://gitlab.com/groups/gitlab-org/-/epics/5521).
    - Product is researching how GitLab has structured communication with users in other beta programs through the use of separate issues for enrollment and feedback.  This also provides a communication channel for users who reach out to us through our Support counterpart.

### Milestone 16.4 (August 18, 2023 - September 17, 2023)

#### Goals:
- Continue to develop walkthroughs and demos for manual database installation [https://gitlab.com/gitlab-org/container-registry/-/issues/1068](https://gitlab.com/gitlab-org/container-registry/-/issues/1068)
- Evaluate options for installing the database through Omnibus and Helm Charts [https://gitlab.com/gitlab-org/container-registry/-/issues/1102](https://gitlab.com/gitlab-org/container-registry/-/issues/1102)
- Weekly forecasts for this project will be determined over the course of this milestone.  This project is just getting started and will initially be reactive to research findings and user feedback.

#### Week of Aug 21-26
- Plan:
  - Define the features and draft changes for the feature based rollout approach discussed last week.  This matrix of features will be documented in the [architecture blueprint](https://docs.gitlab.com/ee/architecture/blueprints/container_registry_metadata_database_self_managed_rollout/).
  - Officially opening the Beta program this week.
  - Continue [testing](https://gitlab.com/gitlab-org/container-registry/-/issues/1099) data migration strategies with different types of storage backend and registry sizes.
  - Starting work on Omnibus and Helm Chart installations following discovery in the POC completed last week.
  - Experiment with enabling and configuring the metadata database in Omnibus installations. [https://gitlab.com/gitlab-org/container-registry/-/issues/1071](https://gitlab.com/gitlab-org/container-registry/-/issues/1071)
- Completed:
  - Added information about the beta program to docs ([MR in progress](https://gitlab.com/gitlab-org/gitlab/-/merge_requests/130123)) including the list of features that will be used as iterations to progress beyond Beta.
  - Persist container registry database settings in Omnibus after a reconfiguration. [https://gitlab.com/gitlab-org/container-registry/-/issues/1071](https://gitlab.com/gitlab-org/container-registry/-/issues/1071)

#### Week of Aug 28-Sept 1
- Plan:
  - Create issues for interaction and feedback with issues.  Identifying a first user to start working with the beta this week.
  - Discussions and research to provision the container registry database in Omnibus. [https://gitlab.com/gitlab-org/container-registry/-/issues/1102](https://gitlab.com/gitlab-org/container-registry/-/issues/1102)
  - Testing different sizes of the registry for scalability.
  - Coordinate with our Support Liason to prepare for user interaction.
- Completed:
  - Created issues for communication with users regarding [beta interest](https://gitlab.com/gitlab-org/gitlab/-/issues/379240) and [feedback](https://gitlab.com/gitlab-org/gitlab/-/issues/423459).  Discussions are in progress with a potential first user for the beta program.
  - Through testing, the team discovered a problem with persisting database configuration which will need to be fixed in 16.4 before the beta user can start the installation. 

#### Week of Sept 4-8
- Plan:
  - Review and merge the omnibus [MR](https://gitlab.com/gitlab-org/omnibus-gitlab/-/merge_requests/7100) for persisting database settings.
  - Create walkthrough demo of the migration process ([issue](https://gitlab.com/gitlab-org/container-registry/-/issues/1068))
  - Add to the [container registry seeder](https://gitlab.com/gitlab-org/ci-cd/package-stage/container-registry-seeder) project to make testing easier.
- Completed:
  - Merged omnibus [MR](https://gitlab.com/gitlab-org/omnibus-gitlab/-/merge_requests/7100) and tested.
  - Recorded [youtube video](https://www.youtube.com/watch?v=aZdyYrKdtxk) for import process.
  - Tested 100GB model for migration in GCP. ([issue](https://gitlab.com/gitlab-org/gitlab/-/issues/424479))

#### Week of Sept 11-18
- Plan:
  - Investigate using a lock file for data integrety ([issue](https://gitlab.com/gitlab-org/container-registry/-/issues/918)).  Prevent non-database registry changes (such as offline garbage collection) to database managed objects.
  - Further testing with AWS and 500GB models.

### Milestone 16.5 (September 17, 2023 - October 10, 2023)

#### Goals:
-

### Milestone 16.6 (October 17, 2023 - November 10, 2023)

#### Goals:
-

### Milestone 16.7 (November 13, 2023 - December 8, 2023)

#### Goals:
-

### Milestone 16.8 (December 11, 2023 - January 12, 2024)

#### Goals:
-

### Milestone 16.9 (January 15, 2024 - February 9, 2024)

#### Goals:
-

### Milestone 16.10 (February 12, 2024 - March 8, 2024)

#### Goals:
-

### Milestone 16.11 (March 11, 2024 - April 12, 2024)

#### Goals:
-

### Milestone 17.0 (April 15, 2024 - May 10, 2024)

#### Goals:
-
